{"schema_version":3,"name":"VIP Fuzzy Matching","description":null,"guid":"4c0b6945dbbc6af3dadae9a8b7b52fd4","exported_at":"2020-12-05T22:51:18Z","agents":[{"type":"Agents::EventTransformationAgent","name":"Return Results","disabled":false,"guid":"a11a26346cb976cd25ace618cd20a5f5","options":{"mode":"message_only","payload":{"message":"{{ .calculate_similarity.body.str1 }} is a pretty close match to {{ .explode_vip.vip}}"}},"keep_events_for":0},{"type":"Agents::HTTPRequestAgent","name":"Fuzzy Match Lambda Function","disabled":false,"guid":"515ebf35d1c090122cc8b9570fc4f424","options":{"content_type":"json","headers":{"Authorization":" {{ .CREDENTIAL.aws_us_east_1_lambda}}"},"method":"post","payload":{"str1":"{{ .calculate_similarity.body.str1}}","str2":"{{ .explode_vip.vip}}"},"url":"https://lambda.us-east-1.amazonaws.com/2015-03-31/functions/levenshtein_example/invocations?x-amz-log-type=None&x-amz-invocation-type=RequestResponse"},"schedule":null,"keep_events_for":0},{"type":"Agents::WebhookAgent","name":"Calculate Similarity","disabled":false,"guid":"fb3531d2127955a075ed777a2c1a5d48","options":{"secret":"8bfabdd44138867ba24751cdc818af62","verbs":"get,post"},"keep_events_for":0},{"type":"Agents::EventTransformationAgent","name":"Explode VIP","disabled":false,"guid":"0ce41eed697f95ffc25abd3676f2c743","options":{"mode":"explode","path":"{{.RESOURCE.vip_list_example.vips | as_object }}","to":"vip"},"keep_events_for":0},{"type":"Agents::TriggerAgent","name":"Trigger Agent","disabled":false,"guid":"a3e2cddc8139bea0a92ae3c368f2a5a8","options":{"rules":[{"path":"{{ .fuzzy_match_lambda_function.body.ratio }}","type":"field>=value","value":"75"}]},"keep_events_for":0},{"type":"Agents::SendToStoryAgent","name":"Send to Story Agent","disabled":false,"guid":"2aefdc9f7f0b5a1f29cf9902b4741dd6","options":{"payload":{"str1":"e0in@tones.io"},"story":"{% story VIP Fuzzy Matching %}"},"schedule":null,"keep_events_for":0}],"links":[{"source":1,"receiver":4},{"source":2,"receiver":3},{"source":3,"receiver":1},{"source":4,"receiver":0}],"diagram_layout":"{\"a3e2cddc8139bea0a92ae3c368f2a5a8\":[105,-120],\"a11a26346cb976cd25ace618cd20a5f5\":[105,-30],\"2aefdc9f7f0b5a1f29cf9902b4741dd6\":[345,-120],\"fb3531d2127955a075ed777a2c1a5d48\":[120,-450],\"0ce41eed697f95ffc25abd3676f2c743\":[120,-345],\"515ebf35d1c090122cc8b9570fc4f424\":[120,-240]}","send_to_story_enabled":true,"entry_agent_guid":"fb3531d2127955a075ed777a2c1a5d48","exit_agent_guid":"a11a26346cb976cd25ace618cd20a5f5","send_to_stories":[],"form":{"name":"New story for tuckner329@gmail.com Form","description":"","fields":[],"visibility":"tenant","agent_guid":null,"success_message":"Thank you for your submission"}}